<div class="popUpTable">
    <div class="modal-header header-bg">
        <div *ngIf="value" class="header-content content-header">
            {{'workingOvertime.addOrEdit.detailRegisterOvertime' | translate}}
        </div>
        <div *ngIf="!value" class="header-content content-header">
            {{'workingOvertime.addOrEdit.registerOvertime' | translate}} 123
        </div>
        <span (click)="closeModal()"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                          class="bi bi-x-lg" viewBox="0 0 16 16">
            <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
        </svg>
        </span>
    </div>

    <div class="modal-body form-scroll">
        <form [formGroup]="form" novalidate>
            <div class="row">
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="col-form-label"> {{'workingOvertime.addOrEdit.requestCode' | translate}}  <span
                                *ngIf="isRequire('requestCode')"
                                class="text-danger">*</span></label>
                        <input class="form-control" type="text" maxlength="20" (blur)="onBlur('requestCode')"
                               [class.is-invalid]="form.controls['requestCode']?.invalid
                            && (form.controls['requestCode']?.touched || form.controls['requestCode']?.dirty)"
                               placeholder="{{'workingOvertime.addOrEdit.phRequestCode' | translate}} "
                               formControlName="requestCode">
                        <div *ngIf="(form.controls['requestCode']?.touched 
                            ||  form.controls['requestCode']?.dirty)
                                && form.controls['requestCode']?.errors?.required">
                            <small class="text-danger"> {{'workingOvertime.addOrEdit.requestCodeRequired' | translate}} </small>
                        </div>
                        <div *ngIf="(form.controls['requestCode']?.touched
                            ||  form.controls['requestCode']?.dirty)
                                && form.controls['requestCode']?.errors?.maxlength">
                            <small class="text-danger">{{'workingOvertime.addOrEdit.requestCodeMaxlength' | translate}} </small>
                        </div>
                        <div *ngIf="(form.controls['requestCode']?.touched
                            ||  form.controls['requestCode']?.dirty)
                                && form.controls['requestCode']?.errors?.pattern">
                            <small class="text-danger">{{'workingOvertime.addOrEdit.requestCodeTypeTextNumber' | translate}} </small>
                        </div>
                    </div>
                </div>
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="col-form-label">{{'workingOvertime.addOrEdit.projectName' | translate}} <span
                                *ngIf="isRequire('projectName')"
                                class="text-danger">*</span></label>
                        <textarea class="form-control" type="text" maxlength="200" (blur)="onBlur('projectName')"
                                  [class.is-invalid]="form.controls['projectName']?.invalid
                            && (form.controls['projectName']?.touched || form.controls['projectName']?.dirty)"
                                  placeholder="{{'workingOvertime.addOrEdit.phProjectName' | translate}}"
                                  formControlName="projectName">
                        </textarea>
                        <div *ngIf="(form.controls['projectName']?.touched 
                            ||  form.controls['projectName']?.dirty)
                                && form.controls['projectName']?.errors?.required">
                            <small class="text-danger"> {{'workingOvertime.addOrEdit.projectNameRequired' | translate}}</small>
                        </div>
                        <div *ngIf="(form.controls['projectName']?.touched
                            ||  form.controls['projectName']?.dirty)
                                && form.controls['projectName']?.errors?.maxlength">
                            <small class="text-danger"> {{'workingOvertime.addOrEdit.projectNameMaxlength' | translate}}</small>
                        </div>
                    </div>
                </div>
                <div class="col-sm-12">
                    <div class="form-group">
                        <label class="col-form-label">{{'workingOvertime.addOrEdit.overtimeReason' | translate}}<span
                                *ngIf="isRequire('reason')"
                                class="text-danger">*</span></label>
                        <textarea class="form-control" type="text" maxlength="500" (blur)="onBlur('reason')"
                                  [class.is-invalid]="form.controls['reason']?.invalid
                            && (form.controls['reason']?.touched || form.controls['reason']?.dirty)"
                                  placeholder="{{'workingOvertime.addOrEdit.phOvertimeReason' | translate}}"
                                  formControlName="reason">
                        </textarea>
                        <div *ngIf="(form.controls['reason']?.touched 
                            ||  form.controls['reason']?.dirty)
                                && form.controls['reason']?.errors?.required">
                            <small class="text-danger"> {{'workingOvertime.addOrEdit.overtimeReasonRequired' | translate}}</small>
                        </div>
                        <div *ngIf="(form.controls['reason']?.touched
                            ||  form.controls['reason']?.dirty)
                                && form.controls['reason']?.errors?.maxlength">
                            <small class="text-danger"> {{'workingOvertime.addOrEdit.overtimeReasonMaxlength' | translate}}</small>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        <label class="col-form-label">{{'workingOvertime.addOrEdit.startTime' | translate}}345<span
                                *ngIf="isRequire('overtimeFromAt')"
                                class="text-danger">*</span></label>
                        <div class="cal-icon">
                            <input
                                    type="text"
                                    class="form-control datetimepicker"
                                    tabindex="0"
                                    formControlName="overtimeFromAt"
                                    placement="top"
                                    [minDate]="minDate"
                                    placeholder="DD/MM/YYYY"
                                    bsDatepicker
                                    [bsConfig]="{
                                        dateInputFormat: 'DD/MM/YYYY',
                                        isAnimated: true,
                                        returnFocusToInput: true,
                                        withTimepicker: false,
                                        containerClass:'theme-dark-blue'
                                    }"
                            />
                            <small *ngIf="form.controls['overtimeFromAt'].errors?.biggestSevenDays"
                                   class="text-danger">
                                {{'workingOvertime.addOrEdit.biggestSevenDays' | translate}}
                            </small>
                            <small *ngIf="form.controls['overtimeFromAt'].errors?.smallThanSevenDays"
                                   class="text-danger">
                                {{'workingOvertime.addOrEdit.smallThanSevenDays' | translate}}
                            </small>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 row d-flex" style="padding-right: unset">
                    <div class="form-group col" style="padding-right: unset">
                        <label class="col-form-label">{{'workingOvertime.addOrEdit.fromTime' | translate}} 1234
                            <span *ngIf="isRequire('startTime')"
                                  class="text-danger">*</span></label>
                        <input     type="time" name="time"  class="form-control" placeholder="hrs:mins"
                                   pattern="[0-9]{2}:[0-9]{2}"
                                    (change)="catchStartTime($event)" formControlName="startTime"  required/>
                        <div *ngIf="(form.controls['startTime']?.touched
                            ||  form.controls['startTime']?.dirty)
                                && form.controls['startTime']?.errors?.required">
                            <small class="text-danger">{{'workingOvertime.addOrEdit.blank' | translate}}</small>
                        </div>

                        <small *ngIf="form.controls['startTime'].errors?.startHourOffical && !form.controls['overtimeFromAt'].errors?.holidayTimeRule "
                               class="text-danger">
                            {{'workingOvertime.addOrEdit.holidayTimeRule' | translate}}
                        </small>
                        <small *ngIf="compareStartAndEndTime()" class="text-danger">
                            {{'workingOvertime.addOrEdit.startSmallThanEnd' | translate}}
                        </small>
                        <small *ngIf="minApplyFormHour()" class="text-danger">
                            {{'workingOvertime.addOrEdit.noPass1' | translate}}
                        </small>
                        <small *ngIf="minApplyFormMin() && !form.controls['overtimeFromAt'].errors?.holidayTimeRule"
                               class="text-danger">
                            {{'workingOvertime.addOrEdit.noPass3' | translate}}
                        </small>
                        <small *ngIf="form.controls['overtimeFromAt'].errors?.holidayTimeRule && minApplyFormMinHoliday()"
                               class="text-danger">
                            {{'workingOvertime.addOrEdit.noPass8' | translate}}
                        </small>
                    </div>
                    <div class="form-group col" style="padding-right: unset">
                        <label class="col-form-label">{{'workingOvertime.addOrEdit.toTime' | translate}}
                            <span *ngIf="isRequire('endTime')"
                                  class="text-danger">*</span></label>
                        <input type="time" class="form-control" (change)="catchEndTime($event)"
                               formControlName="endTime">
                        <div *ngIf="(form.controls['endTime']?.touched
                            ||  form.controls['endTime']?.dirty)
                                && form.controls['endTime']?.errors?.required">
                            <small class="text-danger">{{'workingOvertime.addOrEdit.blank' | translate}}</small>
                        </div>
                        <small *ngIf="form.controls['endTime'].errors?.endHourOffical && !form.controls['overtimeFromAt'].errors?.holidayTimeRule"
                               class="text-danger">
                            {{'workingOvertime.addOrEdit.holidayTimeRule' | translate}}
                        </small>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <!--    footer-->
    <div class="row footer justify-content-end pb-3" *ngIf="isShow">
        <div class="col-md-4 m-0 p-16">
            <button class="btn btnCancel col-md-12 w-100 btnOT" type="button"
                    (click)="closeModal()">{{"workingOnleave.btn.cancel" | translate}}
            </button>
        </div>
        <div class="col-md-4 m-0 p-16">
            <button class="btn btnSave col-md-12 w-100 btnOT" type="button"
                    (click)="onSave()">{{"workingOnleave.btn.save" | translate}}
            </button>
        </div>
        <div class="col-md-4 m-0 p-16" *ngIf="isShowSaveAndApprove()">
            <button class="btn btnSave col-md-12 w-100 add-btn-ot" type="button"
                    (click)="onSaveAndApprove()">
                {{"workingOnleave.btn.saveAndSendApprove" | translate}}
            </button>
        </div>
    </div>

    <div class="row footer justify-content-end pb-3" *ngIf="isShowApprove">
        <div class="col-md-4 m-0 p-16">
            <button class="btn btnCancel col-md-12 w-100 btnOT" type="button"
                    (click)="onReject()">{{'workingOvertime.btn.reject' | translate}}
            </button>
        </div>
        <div class="col-md-4 m-0 p-16">
            <button class="btn btnSave col-md-12 w-100 btnOT" type="button"
                    (click)="onApprove()">{{'workingOvertime.btn.approve' | translate}}
            </button>
        </div>
    </div>
</div>
